{% extends 'paginas/modelo-ifpr.html' %}

{% load static %}

{% load crispy_forms_tags%}

{% block conteudo %}
<h3>Inserir gestante</h3>
<p class="lead">
    Preencher todos os campos obrigatorios.
</p>

<hr>

<form action="" method="POST">

    {% csrf_token %}

    {{ form|crispy }}
   
    

    <button type="submit" class="btn btn-primary">Salvar</button>

</form>

{% endblock %}

{% block scripts %}

<script src="{% static 'js/jquery.mask.min.js' %}"></script>

<script>      

    // var SPMaskBehavior = function (val) {
    //     return val.replace(/\D/g, '').length === 11 ? '0000-0000' : '(00) 0000-00009';
    // },
    //     spOptions = {
    //         onKeyPress: function (val, e, field, options) {
    //             field.mask(SPMaskBehavior.apply({}, arguments), options);
    //         }
    //     };

    // $('.id_telefoneParaContato').mask(SPMaskBehavior, spOptions);

    // $('.div_id_idadeGestacional').attr({
    //         type: 'hidden',
    //         id: 'div_id_idadeGestacional',
    //     }).appendTo('form');

    var checkbox = $("#id_idadeGestacionalUltrassom");
    var hidden = $("#div_id_idadeGestacional");
    var idadeGestante = $("#id_idadeGestacional")

    checkbox.click( () => {
        if (checkbox.is(':checked') && idadeGestante.val() == "") {
            document.querySelector('button[type="submit"]').disabled = true;
        } else {
           document.querySelector('button[type="submit"]').disabled = false;
        };
    });

    idadeGestante.on("focusout", () => {
            if (idadeGestante.val() != '') {
                document.querySelector('button[type="submit"]').disabled = false;
            } else {
                document.querySelector('button[type="submit"]').disabled = true
            }
        });
    
    hidden.hide();

    checkbox.change(function () {
        if (checkbox.is(':checked')) {
            hidden.show();
        } else {
            hidden.hide();
            $("#div_id_idadeGestacional").val("");
        }
    });

    
    

    
    var now = new Date();
    now.setMinutes(now.getMinutes() - now.getTimezoneOffset());

        var dataNascimento = document.getElementById("id_dataNascimento").value;
        if (dataNascimento == undefined || dataNascimento == "") {
            document.getElementById("id_dataNascimento").type = "date";
        }

        var dataInicioPrenatal = document.getElementById("id_dataInicioPrenatal").value;
        if (dataInicioPrenatal == undefined || dataInicioPrenatal== "") {
            document.getElementById("id_dataInicioPrenatal").type = "date";
        }

        var dum = document.getElementById("id_dum").value;
        if (dum == undefined || dum == "") {
            document.getElementById("id_dum").type = "date";
        }
        
        var ddp = document.getElementById("id_ddp").value;
        if (ddp == undefined || ddp == "") {
            document.getElementById("id_ddp").type = "date";
        }
        
        var dataSolicitacaoUsObstetrico = document.getElementById("id_dataSolicitacaoUsObstetrico").value;
        if (dataSolicitacaoUsObstetrico == undefined || dataSolicitacaoUsObstetrico == "") {
            document.getElementById("id_dataSolicitacaoUsObstetrico").type = "date";
        }
        
        var dataAgendada = document.getElementById("id_dataAgendada").value;
        if (dataAgendada == undefined || dataAgendada == "") {
            document.getElementById("id_dataAgendada").type = "date";
        }
    

    // $(document).ready(function (e) {
    //         var obj = $('.msk-celular');

    //         $(obj).mask(($(obj).val().length > 13) ? '(00)00000-0000' : '(00)0000-0000',
    //             {
    //                 onKeyPress: function (phone, e, currentField, options) {
    //                     var new_sp_phone = phone.match(/^(\(11\)9(5[0-9]|6[0-9]|7[01234569]|8[0-9]|9[0-9])[0-9]{1})/g);
    //                     new_sp_phone ? $(currentField).mask('(00)00000-0000', options) : $(currentField).mask('(00)0000-0000', options)
    //                 }
    //             });
    //     });
    //})
   
</script> 
{% endblock %}


{% block rodape-links %}
    
{% endblock %}


   